(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[553],{2040:(e,t,a)=>{Promise.resolve().then(a.bind(a,8103))},2770:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(5155);a(2115);var r=a(5695);let l=()=>{let e=(0,r.useRouter)(),t="/"===(0,r.usePathname)();return(0,s.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 w-full max-w-xl mx-auto h-[70px] bg-[#F9F9F9] border-b border-[#777] flex items-center justify-center select-none",children:(0,s.jsxs)("div",{className:"w-full max-w-xl flex items-center justify-between px-5 relative",children:[(0,s.jsxs)("button",{onClick:()=>e.back(),className:"bg-none border-none text-[20px] cursor-pointer text-black  p-0 flex items-center transition-opacity duration-200 ".concat(t?"opacity-0 pointer-events-none":"opacity-100"),"aria-hidden":t,tabIndex:t?-1:0,children:["<"," ",(0,s.jsx)("span",{className:"ml-1 hidden sm:inline",children:"Back"})]}),(0,s.jsx)("h1",{className:"absolute left-1/2 transform -translate-x-1/2 text-[20px] font-bold text-black text-center cursor-pointer select-none m-0",onClick:()=>e.push("/"),children:"USTB"}),(0,s.jsx)("div",{className:"w-[60px]"})]})})}},7145:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(5155);a(2115);var r=a(5695),l=a(8396);let n=[{id:1,label:"HOME",path:"/"},{id:2,label:"Community",path:"/community"},{id:3,label:"Chat",path:"/chatlist",requireAuth:!0},{id:5,label:"MY",path:"/mypage",requireAuth:!0}],i=()=>{let e=(0,r.useRouter)(),t=(0,r.usePathname)(),a=t=>{t.requireAuth&&!l.j.currentUser?e.push("/login"):e.push(t.path)};return(0,s.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 w-full max-w-xl mx-auto h-[60px] bg-[#f8f8f8] border-t-2 border-[#cecece] flex justify-around items-center select-none",children:n.map(e=>{let r=t===e.path||"/"!==e.path&&t.startsWith(e.path);return(0,s.jsxs)("button",{onClick:()=>a(e),"aria-label":e.label,className:"flex flex-col items-center justify-center flex-1 max-w-[150px] bg-none border-none outline-none",type:"button",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center mb-1 ".concat(r?"border-orange-500 bg-orange-500":"border-gray-400 bg-transparent")}),(0,s.jsx)("span",{className:"text-[10px] text-[#777] select-none",children:e.label})]},e.id)})})}},8103:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155),r=a(2115),l=a(5317),n=a(8396),i=a(5695),c=a(2770),o=a(7145);function d(){let[e,t]=(0,r.useState)([]),a=(0,i.useRouter)();(0,r.useEffect)(()=>{if(!n.j.currentUser)return void a.push("/login");let e=n.j.currentUser.uid,s=(0,l.P)((0,l.rJ)(n.db,"chats"),(0,l._M)("user_uids","array-contains",e),(0,l.My)("last_message_at","desc")),r=(0,l.aQ)(s,e=>{t(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>r()},[]);let d=e=>{a.push("/chat/".concat(e))};return(0,s.jsxs)("div",{className:"pt-[70px] pb-[60px] max-w-xl mx-auto min-h-screen bg-white flex flex-col",children:[(0,s.jsx)(c.A,{}),(0,s.jsxs)("main",{className:"flex-1 overflow-y-auto p-5",children:[(0,s.jsx)("h1",{className:"text-xl font-bold mb-6 text-yellow-500",children:"Chat List"}),e.length>0?e.map(e=>{var t,a;let r=(null==(t=n.j.currentUser)?void 0:t.uid)===e.user1_uid?e.user2_email:e.user1_email;return(0,s.jsxs)("div",{onClick:()=>d(e.id),className:"border-b py-4 cursor-pointer hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"font-bold text-gray-700",children:r}),(0,s.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:e.last_message?e.last_message.length>30?e.last_message.slice(0,30)+"...":e.last_message:"There is no message"}),(0,s.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:(null==(a=e.last_message_at)?void 0:a.toDate)?e.last_message_at.toDate().toLocaleString():""})]},e.id)}):(0,s.jsx)("div",{className:"text-center text-gray-400 mt-20",children:"No Chat Room"})]}),(0,s.jsx)(o.A,{})]})}},8396:(e,t,a)=>{"use strict";a.d(t,{db:()=>i,h:()=>o,j:()=>c});var s=a(3915),r=a(5317),l=a(6203);let n=(0,s.Wp)({apiKey:"AIzaSyDSTAcpdQ-fDPw10h9wz3y_cS-bywHgVAY",authDomain:"community-chat-app-68996.firebaseapp.com",projectId:"community-chat-app-68996",storageBucket:"community-chat-app-68996.appspot.com",messagingSenderId:"523216978134",appId:"1:523216978134:web:a4bae7b951e880a7f78977",measurementId:"G-3VB219MYP1"}),i=(0,r.aU)(n),c=(0,l.xI)(n),o=new l.HF}},e=>{var t=t=>e(e.s=t);e.O(0,[992,158,678,441,684,358],()=>t(2040)),_N_E=e.O()}]);